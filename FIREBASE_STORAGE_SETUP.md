# Ø¯Ù„ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯ Firebase Storage Ù„Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª

## ğŸ“‹ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

### 1. Ø¥Ø¶Ø§ÙØ© Dependency

Ø£Ø¶Ù `firebase_storage` Ø¥Ù„Ù‰ `pubspec.yaml`:

```yaml
dependencies:
  flutter:
    sdk: flutter
  # ... Ø¨Ø§Ù‚ÙŠ Ø§Ù„ dependencies
  firebase_storage: ^12.0.0 # Ø£Ø¶Ù Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø±
```

Ø«Ù… Ø´ØºÙ‘Ù„:

```bash
flutter pub get
```

---

### 2. Ø¥Ø¹Ø¯Ø§Ø¯ Firebase Storage ÙÙŠ Firebase Console

#### Ø£. ØªÙØ¹ÙŠÙ„ Storage:

1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ [Firebase Console](https://console.firebase.google.com/)
2. Ø§Ø®ØªØ± Ù…Ø´Ø±ÙˆØ¹Ùƒ (TeacherZone)
3. Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©ØŒ Ø§Ø®ØªØ± **Storage**
4. Ø§Ø¶ØºØ· **Get Started**
5. Ø§Ø®ØªØ± **Start in production mode** (Ø£Ùˆ test mode Ù„Ù„ØªØ·ÙˆÙŠØ±)
6. Ø§Ø®ØªØ± **Cloud Storage location** (ÙŠÙØ¶Ù„ `us-central1` Ø£Ùˆ Ø§Ù„Ø£Ù‚Ø±Ø¨ Ù„Ù…Ù†Ø·Ù‚ØªÙƒ)
7. Ø§Ø¶ØºØ· **Done**

#### Ø¨. Ø¥Ø¹Ø¯Ø§Ø¯ Security Rules:

1. ÙÙŠ ØµÙØ­Ø© **Storage**ØŒ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ØªØ¨ÙˆÙŠØ¨ **Rules**
2. Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¨Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯:

```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…ØªØ§Ø­Ø© Ù„Ù„Ø¬Ù…ÙŠØ¹
    match /videos/{videoId} {
      allow read: if true;
      // Ø§Ù„ÙƒØªØ§Ø¨Ø© Ù…Ø­Ø¸ÙˆØ±Ø© (ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© authentication Ù„Ø§Ø­Ù‚Ø§Ù‹)
      allow write: if false;
    }

    // Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø±ÙØ¹ Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¨Ø§Ø´Ø±Ø© (ØºÙŠØ± Ù…Ø³ØªØ­Ø³Ù† Ø¨Ø¯ÙˆÙ† authentication):
    // allow write: if request.resource.size < 100 * 1024 * 1024; // Ø£Ù‚Ù„ Ù…Ù† 100MB

    // Ø±ÙØ¶ ÙƒÙ„ Ø´ÙŠØ¡ Ø¢Ø®Ø±
    match /{allPaths=**} {
      allow read, write: if false;
    }
  }
}
```

3. Ø§Ø¶ØºØ· **Publish**

---

### 3. Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…Ù† Firebase Console (Ù„Ù„ØªØ¬Ø±Ø¨Ø©)

#### Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ù…Ù† Firebase Console (Ù„Ù„ØªØ·ÙˆÙŠØ± ÙˆØ§Ù„ØªØ¬Ø±Ø¨Ø©)

1. ÙÙŠ ØµÙØ­Ø© **Storage**ØŒ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ **Files** tab
2. Ø§Ø¶ØºØ· **Upload file**
3. Ø§Ø®ØªØ± Ù…Ù„Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
4. **Ù…Ù‡Ù…**: Ø§Ù†Ø³Ø® **Download URL** Ù„Ù„ÙÙŠØ¯ÙŠÙˆ - Ø³ØªØ³ØªØ®Ø¯Ù…Ù‡ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

#### Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (Ù…ØªÙ‚Ø¯Ù… - ÙŠØ­ØªØ§Ø¬ ÙƒÙˆØ¯ Ø¥Ø¶Ø§ÙÙŠ)

Ø³ÙŠØªÙ… Ø´Ø±Ø­Ù‡Ø§ ÙÙŠ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©...

---

### 4. ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙˆØ¯ Ù„Ø¯Ø¹Ù… Firebase Storage URLs

#### Ø£. ØªØ­Ø¯ÙŠØ« VideoModel Ù„Ø¯Ø¹Ù… URL Ù…Ù† Storage:

Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙÙŠ `VideoModel` ÙŠØ¯Ø¹Ù… `url` Ø¨Ø§Ù„ÙØ¹Ù„ØŒ Ù„ÙƒÙ† ÙŠØ¬Ø¨ Ø§Ù„ØªØ£ÙƒØ¯ Ø£Ù†Ù‡ ÙŠØ¹Ù…Ù„ Ù…Ø¹ Firebase Storage URLs.

#### Ø¨. Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Admin Panel:

**Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§**:

- Ø§Ø³ØªØ®Ø¯Ù… Firebase Console Ù„Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
- Ø§Ù†Ø³Ø® Download URL
- Ø§Ù„ØµÙ‚ URL ÙÙŠ Ø­Ù‚Ù„ "Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ" Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Admin Panel

**Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©** (Ø±ÙØ¹ Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚):

- ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¯ Ù„Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
- Ø³ÙŠØªÙ… Ø´Ø±Ø­Ù‡Ø§ Ø£Ø¯Ù†Ø§Ù‡

---

### 5. Ø§Ø³ØªØ®Ø¯Ø§Ù… Firebase Storage URLs ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª

Ø¹Ù†Ø¯Ù…Ø§ ØªØ¶ÙŠÙ ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Admin Panel:

1. Ø§Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¥Ù„Ù‰ Firebase Storage (Ù…Ù† Console)
2. Ø§Ù†Ø³Ø® Download URL (Ù…Ø«Ù„: `https://firebasestorage.googleapis.com/v0/b/your-project.appspot.com/o/videos%2Fvideo1.mp4?alt=media&token=...`)
3. Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Admin PanelØŒ Ø§Ù„ØµÙ‚ Ù‡Ø°Ø§ URL ÙÙŠ Ø­Ù‚Ù„ "Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ"
4. Ø³ÙŠØªÙ… Ø­ÙØ¸ URL ÙÙŠ Firestore
5. Ø¹Ù†Ø¯ Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆØŒ Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ URL

---

### 6. (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¨Ø§Ø´Ø±Ø©

Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¨Ø§Ø´Ø±Ø©ØŒ Ø³ØªØ­ØªØ§Ø¬:

1. Ø¥Ø¶Ø§ÙØ© `file_picker` package (Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„)
2. Ø¥Ù†Ø´Ø§Ø¡ use case Ù„Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
3. ØªØ­Ø¯ÙŠØ« Admin Panel Ù„Ø¯Ø¹Ù… Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù

**Ù…Ù„Ø§Ø­Ø¸Ø©**: Ù‡Ø°Ù‡ Ø·Ø±ÙŠÙ‚Ø© Ù…ØªÙ‚Ø¯Ù…Ø© ÙˆØªØ­ØªØ§Ø¬ ÙƒÙˆØ¯ Ø¥Ø¶Ø§ÙÙŠ. Ù„Ù„Ø¨Ø¯Ø¡ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø³Ù‡Ù„Ø© (Ø±ÙØ¹ Ù…Ù† Console).

---

## ğŸ“ Ù…Ø«Ø§Ù„: Ø¥Ø¶Ø§ÙØ© ÙÙŠØ¯ÙŠÙˆ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Storage URL

### Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:

1. **Ø§Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¥Ù„Ù‰ Storage:**

   - Firebase Console â†’ Storage â†’ Upload file
   - Ø§Ø®ØªØ± Ù…Ù„Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
   - Ø§Ù†ØªØ¸Ø± Ø­ØªÙ‰ ÙŠØªÙ… Ø§Ù„Ø±ÙØ¹

2. **Ø§Ù†Ø³Ø® Download URL:**

   - Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø±ÙÙˆØ¹
   - Ø§Ù†Ø³Ø® "Download URL"

3. **Ø£Ø¶Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Admin Panel:**

   - Ø§ÙØªØ­ Admin Panel â†’ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª
   - Ø§Ø®ØªØ± Ø§Ù„ÙƒÙˆØ±Ø³
   - ÙÙŠ Ø­Ù‚Ù„ "Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ"ØŒ Ø§Ù„ØµÙ‚ Download URL
   - Ø£Ø¶Ù Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„ÙˆØµÙ
   - Ø§Ø¶ØºØ· "Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ"

4. **Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ:**
   - URL Ù…Ø­ÙÙˆØ¸ ÙÙŠ Firestore
   - Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ URL

---

## ğŸ”’ Security Rules Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§ Ù„Ù„Ø¥Ù†ØªØ§Ø¬

```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù„Ù„Ø¬Ù…ÙŠØ¹
    match /videos/{videoId} {
      allow read: if true;
      // Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ÙÙ‚Ø· Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø£Ø¯Ù…Ù† (ÙŠØªØ·Ù„Ø¨ Firebase Auth)
      allow write: if request.auth != null &&
                      request.resource.size < 500 * 1024 * 1024 && // Ø£Ù‚Ù„ Ù…Ù† 500MB
                      request.resource.contentType.matches('video/.*');
    }

    // Ø±ÙØ¶ ÙƒÙ„ Ø´ÙŠØ¡ Ø¢Ø®Ø±
    match /{allPaths=**} {
      allow read, write: if false;
    }
  }
}
```

---

## âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©:

1. **Ø­Ø¬Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ**: Firebase Storage Ù„Ù‡ Ø­Ø¯ Ø£Ù‚ØµÙ‰ Ù„Ù„Ø­Ø¬Ù… (ÙŠØªÙˆÙ‚Ù Ø¹Ù„Ù‰ Ø®Ø·Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ)
2. **Ø§Ù„ØªÙƒÙ„ÙØ©**: Ø±ÙØ¹ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ÙŠØ³ØªÙ‡Ù„Ùƒ bandwidth - Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
3. **Ø§Ù„ØªØ®Ø²ÙŠÙ†**: Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© ØªØ³ØªÙ‡Ù„Ùƒ Ù…Ø³Ø§Ø­Ø© ØªØ®Ø²ÙŠÙ†
4. **Ø§Ù„Ø£Ù…Ø§Ù†**: ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ØŒ Ø§Ø³ØªØ®Ø¯Ù… Firebase Authentication Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø±ÙØ¹
5. **CDN**: Firebase Storage ÙŠØ³ØªØ®Ø¯Ù… CDN ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„

---

## ğŸš€ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):

Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŒ Ø£Ø®Ø¨Ø±Ù†ÙŠ ÙˆØ³Ø£Ø¶ÙŠÙ:

- ÙƒÙˆØ¯ Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
- ØªÙ‚Ø¯Ù… Ø§Ù„Ø±ÙØ¹ (progress indicator)
- Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
